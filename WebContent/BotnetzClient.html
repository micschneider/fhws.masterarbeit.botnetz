<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Botnetz</title>
	<script type="text/javascript">
		var botnetzWs = null;
		var output = null;
		var text_toSend = null;
	
		function init()
		{
			var wsUri = "ws://localhost:8080/fhws.masterarbeit.botnetz/botnetz";
			botnetzWs = new WebSocket(wsUri);
			output = document.getElementById("div_output");
			
			botnetzWs.onopen = function()
							   {
									writeToScreen("Connected");
							   }; // end function
			botnetzWs.onmessage = function(evt)
								  {
								  		eval(evt.data);											
								  }; //end function
			botnetzWs.onerror = function(evt)
								{
								 	writeToScreen("ERROR: " + evt.data);
								}; //end function
		}//end function init
		
		function sendText()
		{
			text_toSend = document.getElementById("text_toSend").value;
			botnetzWs.send(text_toSend);
			writeToScreen("Sent this: " + text_toSend);
		}//end function sendText
		
		function writeToScreen(message)
		{
			var pre = document.createElement("p");
		    pre.style.wordWrap = "break-word";
		    pre.innerHTML = message;
		    output.appendChild(pre);
		}//end function writeToScreen
		
		function close()
		{
			botnetzWs.close();
		}//end function close
		
		window.addEventListener("load", init, false);
		window.addEventListener("unload", close, false);
	</script>
</head>
<body>
	<form>
		<input type="text" id="text_toSend">
		<input type="button" value="Senden" id="button_send" onclick="sendText()">
	</form>
	<div id="div_output">
	</div>
</body>
</html>