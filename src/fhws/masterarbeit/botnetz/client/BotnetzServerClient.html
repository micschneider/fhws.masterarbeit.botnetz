<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Botnetz-Server</title>
	<script type="text/javascript">
		var botnetzWs = null;
		var output = null;
	
		function init()
		{
			var wsUri = "ws://localhost:8080/fhws.masterarbeit.botnetz/botnetzServer";
			botnetzWs = new WebSocket(wsUri);
			output = document.getElementById("div_output");
			
			botnetzWs.onopen = function(){
											writeToScreen("Connected");
										 };
			botnetzWs.onmessage = function(evt){
													var jsonArr = JSON.parse(evt.data);
													writeToScreen(convertJSONArr(jsonArr));
											   };
			botnetzWs.onerror = function(evt){
												writeToScreen("ERROR: " + evt.data);
											 };
		}
		
		function convertJSONArr(jsonArr)
		{
		    var jsonOutput = "<table style='border:solid 1px #000000' cellpadding=3>";
		    jsonOutput += "<tr>";
		    jsonOutput += "<th>Laufende Nummer</th>";
		    jsonOutput += "<th>Client Session ID</th>";
		    jsonOutput += "</tr>";
		    var zaehler = 1;
		    
		    for (var i in jsonArr)
		    {
		    	jsonOutput += "<tr>";
		    	jsonOutput += "<td>";
		    	jsonOutput += zaehler;
		    	jsonOutput += "</td>";
		    	jsonOutput += "<td>";
		    	jsonOutput += jsonArr[i].id;
		    	jsonOutput += "</td>";
		    	jsonOutput += "</tr>";
		    	zaehler++;
		    }
		    jsonOutput += "</table>";
		    return jsonOutput;
		}
		
		function writeToScreen(message)
		{
			output.innerHTML = message;
		}
		
		window.addEventListener("load", init, false);
	</script>
</head>
<body>
	<div id="div_output">
	</div>
</body>
</html>